{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?3680","webpack:///App.vue","webpack:///./src/App.vue?88ee","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?4916"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_c","_self","_setup","_setupProxy","staticClass","_m","_v","ref","attrs","on","handleFileUpload","_s","originalSentence","_e","isLoading","generateParaphrases","paraphrasedText","errorMessage","domProps","downloadTxtFile","staticRenderFns","fileInput","async","event","file","target","files","text","endsWith","Error","arrayBuffer","firstSentenceMatch","match","trim","e","message","console","error","response","axios","post","sentence","paraphrases","errorDetails","blob","Blob","type","link","document","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","component","config","productionTip","h","App","$mount"],"mappings":"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","file":"js/app.c506d939.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"container\"},[_vm._m(0),_c('main',[_c('div',{staticClass:\"card\"},[_c('h2',[_vm._v(\"1. 上传文件\")]),_c('input',{ref:\"fileInput\",attrs:{\"type\":\"file\",\"accept\":\".txt,.doc,.docx\"},on:{\"change\":_setup.handleFileUpload}}),(_setup.originalSentence)?_c('div',{staticClass:\"original-sentence\"},[_vm._m(1),_c('blockquote',[_vm._v(_vm._s(_setup.originalSentence))])]):_vm._e()]),_c('div',{staticClass:\"card\"},[_c('h2',[_vm._v(\"2. 生成改写\")]),_c('button',{attrs:{\"disabled\":_setup.isLoading || !_setup.originalSentence},on:{\"click\":_setup.generateParaphrases}},[(_setup.isLoading)?_c('span',[_vm._v(\"正在生成中...\")]):_c('span',[_vm._v(\"开始生成\")])])]),(_setup.paraphrasedText || _setup.isLoading || _setup.errorMessage)?_c('div',{staticClass:\"card result-card\"},[_c('h2',[_vm._v(\"3. 查看并下载结果\")]),(_setup.isLoading)?_c('div',{staticClass:\"loading-spinner\"}):_vm._e(),(_setup.errorMessage)?_c('div',{staticClass:\"error-message\"},[_c('p',[_c('strong',[_vm._v(\"错误:\")]),_vm._v(\" \"+_vm._s(_setup.errorMessage))])]):_vm._e(),(_setup.paraphrasedText)?_c('div',{staticClass:\"result-area\"},[_c('textarea',{attrs:{\"readonly\":\"\"},domProps:{\"value\":_setup.paraphrasedText}}),_c('button',{staticClass:\"download-btn\",on:{\"click\":_setup.downloadTxtFile}},[_vm._v(\"下载为 .txt 文件\")])]):_vm._e()]):_vm._e()])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('header',[_c('h1',[_vm._v(\"句子改写 ✍️\")]),_c('p',[_vm._v(\"上传一个包含句子的 .txt 或 .doc 文件，AI 将提供不同的表达方式。\")])])\n},function (){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('p',[_c('strong',[_vm._v(\"已提取的原始句子:\")])])\n}]\n\nexport { render, staticRenderFns }","<script setup>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\nimport * as mammoth from 'mammoth';\r\n\r\nconst originalSentence = ref('');\r\nconst paraphrasedText = ref('');\r\nconst isLoading = ref(false);\r\nconst errorMessage = ref('');\r\nconst fileInput = ref(null);\r\n\r\n// 1. 修正：此函数现在只负责读取文件并提取句子\r\nconst handleFileUpload = async (event) => {\r\n  const file = event.target.files[0];\r\n  if (!file) return;\r\n\r\n  isLoading.value = true;\r\n  errorMessage.value = '';\r\n  originalSentence.value = '';\r\n  paraphrasedText.value = ''; // 清空旧结果\r\n\r\n  try {\r\n    let text = '';\r\n    if (file.name.endsWith('.txt')) {\r\n      text = await file.text();\r\n    } else if (file.name.endsWith('.docx') || file.name.endsWith('.doc')) {\r\n      const arrayBuffer = await file.arrayBuffer();\r\n      const result = await mammoth.extractRawText({ arrayBuffer });\r\n      text = result.value;\r\n    } else {\r\n      throw new Error('不支持的文件格式，请上传 .txt, .doc, 或 .docx 文件。');\r\n    }\r\n    // 提取第一句话\r\n    const firstSentenceMatch = text.match(/[^.!?。？！\\n]+/);\r\n    originalSentence.value = firstSentenceMatch ? firstSentenceMatch[0].trim() : '';\r\n    if (!originalSentence.value) {\r\n      throw new Error('未能在文件中找到有效的句子。');\r\n    }\r\n  } catch (e) {\r\n    errorMessage.value = e.message;\r\n    console.error('File reading error:', e);\r\n  } finally {\r\n    isLoading.value = false;\r\n  }\r\n};\r\n\r\n// 2. 新增：这是点击按钮时调用的函数，负责与后端通信\r\nconst generateParaphrases = async () => {\r\n  if (!originalSentence.value) {\r\n    errorMessage.value = '请先上传并成功提取句子。';\r\n    return;\r\n  }\r\n  isLoading.value = true;\r\n  errorMessage.value = '';\r\n  paraphrasedText.value = '';\r\n\r\n  try {\r\n    // 调用我们自己的后端服务\r\n    const response = await axios.post('http://localhost:3001/api/paraphrase', {\r\n      sentence: originalSentence.value\r\n    });\r\n    paraphrasedText.value = response.data.paraphrases;\r\n  } catch (error) {\r\n    // --- 这里是修改的部分 ---\r\n    // 使用老式JS语法检查属性是否存在，以保证兼容性\r\n    const errorDetails = (error.response && error.response.data && error.response.data.error) || error.message;\r\n    errorMessage.value = '调用后端API失败: ' + errorDetails;\r\n    console.error('API call failed:', error);\r\n    // --- 修改结束 ---\r\n  } finally {\r\n    isLoading.value = false;\r\n  }\r\n};\r\n\r\n// 3. 下载功能保持不变\r\nconst downloadTxtFile = () => {\r\n  if (!paraphrasedText.value) return;\r\n  const blob = new Blob([paraphrasedText.value], { type: 'text/plain;charset=utf-8' });\r\n  const link = document.createElement('a');\r\n  link.href = URL.createObjectURL(blob);\r\n  link.download = 'paraphrased_sentences.txt';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  URL.revokeObjectURL(link.href);\r\n};\r\n\r\n// 4. 移除：删除了原来在顶层执行的错误代码\r\n</script>\r\n<template>\r\n  <div class=\"container\">\r\n    <header>\r\n      <h1>句子改写 ✍️</h1>\r\n      <p>上传一个包含句子的 .txt 或 .doc 文件，AI 将提供不同的表达方式。</p>\r\n    </header>\r\n\r\n    <main>\r\n      <div class=\"card\">\r\n        <h2>1. 上传文件</h2>\r\n        <input type=\"file\" @change=\"handleFileUpload\" accept=\".txt,.doc,.docx\" ref=\"fileInput\" />\r\n        <div v-if=\"originalSentence\" class=\"original-sentence\">\r\n          <p><strong>已提取的原始句子:</strong></p>\r\n          <blockquote>{{ originalSentence }}</blockquote>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"card\">\r\n        <h2>2. 生成改写</h2>\r\n        <button @click=\"generateParaphrases\" :disabled=\"isLoading || !originalSentence\">\r\n          <span v-if=\"isLoading\">正在生成中...</span>\r\n          <span v-else>开始生成</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div v-if=\"paraphrasedText || isLoading || errorMessage\" class=\"card result-card\">\r\n        <h2>3. 查看并下载结果</h2>\r\n        <div v-if=\"isLoading\" class=\"loading-spinner\"></div>\r\n        <div v-if=\"errorMessage\" class=\"error-message\">\r\n          <p><strong>错误:</strong> {{ errorMessage }}</p>\r\n        </div>\r\n        <div v-if=\"paraphrasedText\" class=\"result-area\">\r\n          <textarea readonly :value=\"paraphrasedText\"></textarea>\r\n          <button @click=\"downloadTxtFile\" class=\"download-btn\">下载为 .txt 文件</button>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n:root {\r\n  --primary-color: #42b883;\r\n  --secondary-color: #35495e;\r\n  --bg-color: #f0f2f5;\r\n  --card-bg: #ffffff;\r\n  --text-color: #333;\r\n  --border-radius: 8px;\r\n  --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\nbody {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n  background-color: var(--bg-color);\r\n  color: var(--text-color);\r\n  margin: 0;\r\n  padding: 2rem;\r\n}\r\n.container {\r\n  max-width: 800px;\r\n  margin: auto;\r\n}\r\nheader {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\nh1 {\r\n  color: var(--secondary-color);\r\n}\r\n.card {\r\n  background: var(--card-bg);\r\n  padding: 1.5rem;\r\n  border-radius: var(--border-radius);\r\n  box-shadow: var(--box-shadow);\r\n  margin-bottom: 1.5rem;\r\n}\r\nbutton {\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  padding: 10px 20px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  transition: background-color 0.3s;\r\n}\r\nbutton:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\nbutton:not(:disabled):hover {\r\n  background-color: #36a071;\r\n}\r\n.download-btn {\r\n  background-color: var(--secondary-color);\r\n  margin-top: 1rem;\r\n}\r\n.download-btn:hover {\r\n  background-color: #2c3e50;\r\n}\r\ninput[type=\"file\"] {\r\n  display: block;\r\n  margin-bottom: 1rem;\r\n}\r\n.original-sentence blockquote {\r\n  background-color: #f9f9f9;\r\n  border-left: 5px solid var(--primary-color);\r\n  padding: 10px;\r\n  margin: 10px 0 0 0;\r\n}\r\n.result-area textarea {\r\n  width: 100%;\r\n  height: 300px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  padding: 10px;\r\n  font-family: monospace;\r\n  resize: vertical;\r\n}\r\n.error-message {\r\n  color: #d9534f;\r\n  background-color: #f2dede;\r\n  border: 1px solid #ebccd1;\r\n  padding: 15px;\r\n  border-radius: var(--border-radius);\r\n}\r\n.loading-spinner {\r\n  border: 4px solid #f3f3f3;\r\n  border-top: 4px solid var(--primary-color);\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  animation: spin 1s linear infinite;\r\n  margin: 20px auto;\r\n}\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&setup=true&lang=js\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&setup=true&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6ebab868\"\nimport script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=6ebab868&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n    render: h => h(App),\r\n}).$mount('#app')","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=6ebab868&prod&lang=css\""],"sourceRoot":""}