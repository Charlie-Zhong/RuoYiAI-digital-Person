(function(e){function t(t){for(var r,s,l=t[0],i=t[1],c=t[2],p=0,d=[];p<l.length;p++)s=l[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,l=1;l<a.length;l++){var i=a[l];0!==n[i]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={app:0},o=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=i;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"423a":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var r=a("2b0e"),n=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"container"},[e._m(0),t("main",[t("div",{staticClass:"card"},[t("h2",[e._v("1. 上传文件")]),t("input",{ref:"fileInput",attrs:{type:"file",accept:".txt,.doc,.docx"},on:{change:a.handleFileUpload}}),a.originalSentence?t("div",{staticClass:"original-sentence"},[e._m(1),t("blockquote",[e._v(e._s(a.originalSentence))])]):e._e()]),t("div",{staticClass:"card"},[t("h2",[e._v("2. 生成改写")]),t("button",{attrs:{disabled:a.isLoading||!a.originalSentence},on:{click:a.generateParaphrases}},[a.isLoading?t("span",[e._v("正在生成中...")]):t("span",[e._v("开始生成")])])]),a.paraphrasedText||a.isLoading||a.errorMessage?t("div",{staticClass:"card result-card"},[t("h2",[e._v("3. 查看并下载结果")]),a.isLoading?t("div",{staticClass:"loading-spinner"}):e._e(),a.errorMessage?t("div",{staticClass:"error-message"},[t("p",[t("strong",[e._v("错误:")]),e._v(" "+e._s(a.errorMessage))])]):e._e(),a.paraphrasedText?t("div",{staticClass:"result-area"},[t("textarea",{attrs:{readonly:""},domProps:{value:a.paraphrasedText}}),t("button",{staticClass:"download-btn",on:{click:a.downloadTxtFile}},[e._v("下载为 .txt 文件")])]):e._e()]):e._e()])])},o=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("header",[t("h1",[e._v("句子改写 ✍️")]),t("p",[e._v("上传一个包含句子的 .txt 或 .doc 文件，AI 将提供不同的表达方式。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[t("strong",[e._v("已提取的原始句子:")])])}],s=a("cee4"),l=a("c343"),i={__name:"App",setup(e){const t=Object(r["b"])(""),a=Object(r["b"])(""),n=Object(r["b"])(!1),o=Object(r["b"])(""),i=Object(r["b"])(null),c=async e=>{const r=e.target.files[0];if(r){n.value=!0,o.value="",t.value="",a.value="";try{let e="";if(r.name.endsWith(".txt"))e=await r.text();else{if(!r.name.endsWith(".docx")&&!r.name.endsWith(".doc"))throw new Error("不支持的文件格式，请上传 .txt, .doc, 或 .docx 文件。");{const t=await r.arrayBuffer(),a=await l["extractRawText"]({arrayBuffer:t});e=a.value}}const a=e.match(/[^.!?。？！\n]+/);if(t.value=a?a[0].trim():"",!t.value)throw new Error("未能在文件中找到有效的句子。")}catch(s){o.value=s.message,console.error("File reading error:",s)}finally{n.value=!1}}},u=async()=>{if(t.value){n.value=!0,o.value="",a.value="";try{const e=await s["a"].post("http://localhost:3001/api/paraphrase",{sentence:t.value});a.value=e.data.paraphrases}catch(e){const t=e.response&&e.response.data&&e.response.data.error||e.message;o.value="调用后端API失败: "+t,console.error("API call failed:",e)}finally{n.value=!1}}else o.value="请先上传并成功提取句子。"},p=()=>{if(!a.value)return;const e=new Blob([a.value],{type:"text/plain;charset=utf-8"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="paraphrased_sentences.txt",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(t.href)};return{__sfc:!0,originalSentence:t,paraphrasedText:a,isLoading:n,errorMessage:o,fileInput:i,handleFileUpload:c,generateParaphrases:u,downloadTxtFile:p}}},c=i,u=(a("976e"),a("2877")),p=Object(u["a"])(c,n,o,!1,null,null,null),d=p.exports;r["a"].config.productionTip=!1,new r["a"]({render:e=>e(d)}).$mount("#app")},"976e":function(e,t,a){"use strict";a("423a")}});
//# sourceMappingURL=app.c506d939.js.map